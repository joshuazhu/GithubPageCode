---
 title: Effective C# -- 6. Understand the Attraction of Small Functions
 date: {date}
 categories: C Sharp
---

1. .Net runtime invokes the JIT compiler to translate IL generated by C# compiler into machine code.The CLR invokes the JITer on __function by function basis__.

2. __Functions that do not ever get called do not get JITed__. You can __minimise__ the amount of code that __gets JITed__ by factoring code into __more smaller functions__.
<!-- more -->
```cs
    public string BuildMsg(bool takeFirstPath)
    {
        StringBuilder msg = new StringBuilder();
        //Both parts are JITed
        if (takeFirstPath)
        {
            msg.Append("A problem occurred.");
            msg.Append("\nThis is a problem.");
            msg.Append("imagine much more text");
        }
        else
        {
            msg.Append("This path is not so bad.");
            msg.Append("\nIt is only a minor inconvenience.");
            msg.Append("Add more detailed diagnostics here.");
        }
        return msg.ToString();
    }

    public string BuildMsg2(bool takeFirstPath)
    {
        //function can be JITed on demand rather than the first time BuildMsg is called
        if (takeFirstPath)
        {
            return FirstPath();
        }
        else
        {
            return SecondPath();
        }
    }
```

3. __Enregistration__ selecting which local variables can be stored in __registers__ rather than on the __stack__. __Fewer local variables__ are good for enregistration.